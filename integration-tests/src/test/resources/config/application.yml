spring:
  kafka:
    bootstrap-servers: ${KAFKA_TCP_HOST:localhost}:${KAFKA_TCP_9092}
    properties:
      max.request.size: 10000012
      request.timeout.ms: 11000
      session.timeout.ms: 10000
      max.partition.fetch.bytes: 10485760
      partitioner.class: org.apache.kafka.clients.producer.RoundRobinPartitioner
    producer:
      acks: 'all'
    consumer:
      maxPollRecords: 10
      autoOffsetReset: 'earliest'
      enableAutoCommit: false
      heartbeatInterval: PT1S

tw-tasks:
  core:
    zookeeper-connect-string: ${ZOOKEEPER_TCP_HOST:localhost}:${ZOOKEEPER_TCP_2181}
    topic-replication-factor: 1
    waiting-tasks-polling-interval: PT0.1S
    additional-processing-buckets: manualStart
    stuck-tasks-polling-interval: PT1S
    configure-kafka-topics: true
    generic-medium-delay: 100ms
    taskTablesSchemaName: "tw-tasks-test"
    assertionsEnabled: true

logging.level.com.transferwise.tasks: DEBUG
logging.level.kafka: WARN
logging.level.org.apache.zookeeper: WARN

tw-graceful-shutdown:
  shutdown-timeout-ms: 1000
  clients-reaction-time-ms: 1
  strategies-check-interval-time-ms: 1000
tw-incidents:
  victorops:
    enabled: false
  slack:
    enabled: false
tw-curator:
  zookeeper-connect-string: ${ZOOKEEPER_TCP_HOST:localhost}:${ZOOKEEPER_TCP_2181}
---

spring:
  profiles: circle
testenv:
  mysql:
    port: 3306
    host: mysql1
  postgres:
    port: 5432
    host: postgres1
  kafka:
    host: kafka1
    port: 9092
  zookeeper:
    host: zk-service1
    port: 2181
  mongo:
    host: mongo1
    port: 27017

---

spring:
  profiles: mysql
  datasource:
    url: jdbc:mariadb://${MARIADB_TCP_HOST:localhost}:${MARIADB_TCP_3306}/tw-tasks-test?maxAllowedPacket=1073741824&useSSL=false&rewriteBatchStatements=true
    username: root
    password: example-password-change-me
  kafka:
    client-id: test-mysql
    consumer:
      groupId: 'test-mysql'

tw-tasks.core:
  db-type: mysql
  group-id: test-mysql
  client-id: test-mysql

spring.liquibase.change-log: classpath:db/changelog/db.tw-tasks-mysql.xml

---

spring:
  profiles: postgres
  datasource:
    url: jdbc:postgresql://${POSTGRES_TCP_HOST:localhost}:${POSTGRES_TCP_5432}/postgres
    username: postgres
    password: example-password-change-me
  kafka:
    client-id: test-postgres
    consumer:
      groupId: 'test'

tw-tasks.core:
  db-type: postgres
  group-id: test-postgres
  client-id: test-postgres
  taskTablesSchemaName: "public"

spring.liquibase.change-log: classpath:db/changelog/db.tw-tasks-postgres.xml

---

spring:
  profiles: mongo
  kafka:
    client-id: test-mongo
    consumer:
      groupId: 'test'
  data:
    mongodb:
      database: twtask
      host: ${MONGO_TCP_HOST:localhost}
      username: twuser
      password: example-password-change-me
      replica-set-name: twtask-mongo-replicaset
      port: ${MONGO_TCP_27017:27017}
      authentication-database: admin

tw-tasks.core:
  db-type: mongo
  group-id: test-mongo
  client-id: test-mongo