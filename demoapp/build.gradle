ext.projectName = "Transferwise Tasks Executor Demo App"
ext.projectDescription = "Transferwise Tasks Executor Demo App - Used for performance testing"
ext.projectArtifactName = "tw-tasks-executor-demoapp"

apply from: '../build.common.gradle'

apply plugin: "org.springframework.boot"

dependencies {
    implementation project(":tw-tasks-core-spring-boot-starter")
    implementation project(":tw-tasks-incidents-spring-boot-starter")
    implementation project(":tw-tasks-kafka-listener-spring-boot-starter")
    implementation project(":tw-tasks-kafka-publisher-spring-boot-starter")
    implementation project(":tw-tasks-management-spring-boot-starter")

    implementation libraries.springBootStarterWeb
    implementation libraries.springBootStarterJdbc
    implementation libraries.springKafka
    implementation libraries.gafferJta
    implementation libraries.tomcatJdbc
    implementation libraries.twBaseUtils
    implementation libraries.twGracefulShutdown
    implementation libraries.twGracefulShutdownIntefaces

    compileOnly libraries.newRelic

    runtimeOnly libraries.springBootStarterActuator
    runtimeOnly libraries.micrometerRegistryPrometheus
    runtimeOnly libraries.mariadbJavaClient
    runtimeOnly libraries.janino
    runtimeOnly libraries.liquibaseCore
    runtimeOnly libraries.mysqlConnectorJava
    runtimeOnly libraries.postgresql
    runtimeOnly libraries.twEntryPointsStarter
}

springBoot {
    mainClassName = 'com.transferwise.tasks.demoapp.Application'
}

bootRun {
    systemProperties = System.properties as Map<String, ?>
}

bootJar {
    excludeDevtools = true
}
