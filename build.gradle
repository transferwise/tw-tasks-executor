buildscript {
    repositories {
        maven {
            setUrl("https://arti.tw.ee/artifactory/plugins-release")
        }
        mavenLocal()
    }

    dependencies {
        classpath "com.avast.gradle:gradle-docker-compose-plugin:0.13.4"
    }
}

plugins {
    id "com.github.spotbugs" version "4.5.1" apply false
    id "idea"
    id 'org.springframework.boot' version '2.3.4.RELEASE' apply false
}

idea.project {
    vcs = 'Git'
    languageLevel = JavaVersion.VERSION_1_8
    targetBytecodeVersion = JavaVersion.VERSION_1_8
}

idea.module {
    downloadJavadoc = false
    downloadSources = true
    excludeDirs += file('logs')
    excludeDirs += file('gradle')
    excludeDirs += file('build')
    excludeDirs += file('target')
    excludeDirs += file('.idea')
    excludeDirs += file('.gradle')
    excludeDirs += file('logs2')
}

task clean {

}

task addTag(type: Exec) {
    commandLine 'git', 'tag', "$project.name-$project.version", '-m', "$project.name-$project.version"
}
task pushTag(type: Exec) {
    commandLine 'git', 'push', 'origin', "$project.name-$project.version"
}

pushTag.dependsOn addTag
